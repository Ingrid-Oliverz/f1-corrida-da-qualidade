<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>F1: Corrida da Qualidade</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fonte Orbitron -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">

<style>
:root{
  --neon-red:#E10600;
  --neon-blue:#00BFFF;
  --asphalt:#0b0b0f;
  --text:#f3f6ff;
  --gold:#FFD500;
  --ok:#03c988;
}
html,body{
  height:100%; margin:0;
  font-family:'Orbitron',system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  background: radial-gradient(1000px 600px at 50% -10%, rgba(0,0,0,.6) 0%, rgba(8,8,10,1) 40%), linear-gradient(180deg,#050608,#040405);
  color:var(--text);
}
.f1-card{background:linear-gradient(180deg,rgba(18,20,24,.86),rgba(8,9,12,.86));border:1px solid rgba(255,255,255,.05);border-radius:12px;box-shadow:0 12px 40px rgba(0,0,0,.65)}
.f1-title{text-shadow:0 0 12px rgba(0,191,255,.15);letter-spacing:.06em}
.hud{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
.hud-pill{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:8px 12px;min-width:110px;text-align:center;font-weight:700}
.hud-pill small{display:block;font-size:11px;color:rgba(255,255,255,.65)}
#total-timer{color:var(--neon-blue);text-shadow:0 0 10px rgba(0,191,255,.25);font-variant-numeric:tabular-nums}
.action-btn{background:linear-gradient(180deg,#12141a,#0b0d11);border:1px solid rgba(255,255,255,.06);color:#eaf1ff;border-radius:10px;font-weight:700;padding:.6rem .9rem;letter-spacing:.06em;transition:transform .12s ease,border-color .12s ease,box-shadow .12s ease}
.action-btn:hover{transform:translateY(-2px);border-color:rgba(0,191,255,.28)}
.option-btn{background:linear-gradient(180deg,#0f1116,#0b0d11);border:1px solid rgba(255,255,255,.06);border-radius:10px;padding:.9rem 1rem;text-align:left;font-weight:600;transition:transform .08s ease,border-color .08s ease}
.option-btn:hover:not(:disabled){transform:translateY(-2px);border-color:rgba(255,213,0,.35)}
.correct{background:linear-gradient(180deg,rgba(3,201,136,.2),rgba(3,201,136,.08))!important;border-color:rgba(3,201,136,.6)!important}
.incorrect{background:linear-gradient(180deg,rgba(225,6,0,.2),rgba(225,6,0,.08))!important;border-color:rgba(225,6,0,.6)!important}
#progress-track{position:relative;height:56px;border-radius:12px;border:1px solid rgba(255,255,255,.06);background:linear-gradient(90deg,rgba(255,255,255,.02),rgba(255,255,255,.01));overflow:hidden}
#car,#ghost-car{position:absolute;bottom:6px;font-size:2.25rem;transform:scaleX(-1);transition:left 900ms ease;will-change:left}
#ghost-car{opacity:.45;filter:grayscale(80%)}
.finish-wall{position:absolute;right:0;top:0;bottom:0;width:10px;background-image:linear-gradient(45deg,white 25%,black 25%,black 50%,white 50%,white 75%,black 75%,black);background-size:16px 16px}
.boost{animation:boostTrail .8s ease-out;filter:drop-shadow(0 0 8px rgba(0,191,255,.6))}
@keyframes boostTrail{0%{transform:scaleX(-1);text-shadow:0 0 0 transparent}50%{text-shadow:0 0 18px rgba(0,191,255,.8)}100%{transform:scaleX(-1);text-shadow:0 0 0 transparent}}
#timer-bar{height:8px;background:linear-gradient(90deg,#03c988,#ffd500);transition:width 1s linear,background .4s}
.timer-wrap{height:8px;background:rgba(255,255,255,.06);border-radius:8px;overflow:hidden}
.ranking-row{display:grid;grid-template-columns:1fr .9fr .8fr .9fr .9fr .6fr .35fr;gap:8px;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,.03)}
.ranking-row + .ranking-row{margin-top:8px}
.rank-medal{font-weight:900}
.modal{display:none}
.rounded-input{border-radius:8px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.03);padding:.7rem;width:100%;color:var(--text);font-weight:700}
</style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

<!-- CAPA -->
<div id="cover-modal" class="fixed inset-0 bg-black flex flex-col items-center justify-center z-50 p-4 text-center">
  <div class="absolute inset-0 bg-black bg-opacity-70"></div>
  <div class="relative max-w-2xl">
    <h1 class="f1-title text-5xl md:text-6xl font-bold mb-6">F1: Corrida da Qualidade</h1>
    <p class="text-gray-300 mb-8">‚ÄúNa pista da qualidade, cada segundo conta. Est√° pronta para correr?‚Äù</p>
    <button id="cover-btn" class="action-btn text-2xl px-10 py-4">Correr</button>
  </div>
</div>

<!-- FORM DADOS JOGADOR -->
<div id="player-info-modal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4">
  <div class="f1-card p-8 text-center max-w-md w-full">
    <h2 class="f1-title text-2xl font-bold mb-4">üèéÔ∏è Identifica√ß√£o do Piloto</h2>
    <div class="flex flex-col gap-3 mb-6">
      <input type="text" id="player-name-start" placeholder="Nome" class="rounded-input">
      <input type="text" id="player-area-start" placeholder="√Årea (ex.: PXS)" class="rounded-input">
      <input type="text" id="player-edv-start" placeholder="EDV" class="rounded-input">
    </div>
    <button id="start-game-btn" class="action-btn py-2 w-full">Iniciar Corrida</button>
  </div>
</div>

<!-- JOGO -->
<div id="main-game-wrapper" class="hidden w-full max-w-4xl mx-auto">
  <header class="text-center mb-6">
    <h1 class="f1-title text-3xl md:text-4xl font-bold mb-3">F1: Corrida da Qualidade</h1>
    <div class="hud">
      <div class="hud-pill"><small>Pergunta</small><span id="question-counter">1/5</span></div>
      <div class="hud-pill"><small>Pontos</small><span id="score-display">0</span></div>
      <div class="hud-pill"><small>Tempo</small><span id="total-timer">00:00.000</span></div>
      <button id="ranking-btn" class="action-btn">üèÜ Ranking</button>
      <button id="restart-btn-top" class="action-btn">Reiniciar</button>
      <button id="sound-toggle" class="action-btn" title="Som">üîá</button>
    </div>
  </header>

  <div id="progress-track" class="w-full h-14 mb-6 relative f1-card p-3">
    <div id="ghost-car-container" class="absolute left-0 bottom-1 h-full w-full">
      <div id="ghost-car">üèéÔ∏è</div>
    </div>
    <div id="car-container" class="absolute left-0 bottom-1 h-full w-full">
      <div id="car">üèéÔ∏è</div>
    </div>
    <div class="finish-wall"></div>
  </div>

  <main id="game-card" class="f1-card p-6 md:p-8">
    <div class="flex justify-between items-center mb-4 text-sm">
      <p id="question-counter-alt" class="text-gray-400">Pronto para acelerar?</p>
      <p id="score-display-alt" class="font-bold text-yellow-400">Pontos: 0</p>
    </div>
    <div class="timer-wrap mb-5"><div id="timer-bar" style="width:100%"></div></div>
    <p id="question-text" class="text-base md:text-lg mb-6 leading-relaxed">Carregando pergunta...</p>
    <div id="options-container" class="space-y-3"></div>
  </main>
</div>

<!-- FIM DE JOGO -->
<div id="end-game-modal" class="modal fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4">
  <div class="f1-card p-8 text-center max-w-md w-full">
    <h2 id="modal-title" class="f1-title text-2xl font-bold mb-3">üèÅ Fim da Corrida!</h2>
    <p id="modal-text" class="text-gray-300 mb-6"></p>
    <button id="restart-btn" class="action-btn py-2 w-full">Correr Novamente</button>
  </div>
</div>

<!-- RANKING -->
<div id="ranking-modal" class="modal fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
  <div class="f1-card p-8 text-center max-w-3xl w-full mx-auto">
    <h2 class="f1-title text-2xl font-bold mb-6">üèÜ Ranking dos Campe√µes üèÜ</h2>
    <div id="ranking-list" class="space-y-2 text-left max-h-96 overflow-y-auto pr-1 text-sm"></div>
    <div class="flex items-center justify-between mt-6 gap-3">
      <div class="text-left text-xs text-gray-400">* √çcone üóëÔ∏è remove registro (senha exigida).</div>
      <div class="flex gap-3">
        <button id="clear-ranking-btn" class="action-btn py-2 px-4">üóëÔ∏è Limpar Ranking</button>
        <button id="close-ranking-btn" class="action-btn py-2 px-6">Fechar</button>
        <button id="new-game-from-ranking-btn" class="action-btn py-2 px-6">Novo Jogo</button>
      </div>
    </div>
  </div>
</div>

<script>
/** DOM **/
const coverModal = document.getElementById('cover-modal');
const playerInfoModal = document.getElementById('player-info-modal');
const startGameBtn = document.getElementById('start-game-btn');
const nameStart = document.getElementById('player-name-start');
const areaStart = document.getElementById('player-area-start');
const edvStart  = document.getElementById('player-edv-start');
const mainGameWrapper = document.getElementById('main-game-wrapper');
const endGameModal = document.getElementById('end-game-modal');
const modalText = document.getElementById('modal-text');
const restartBtn = document.getElementById('restart-btn');

let playerData = { name:"", area:"", edv:"" };

/* Mostrar modal de dados ao clicar em ‚ÄúCorrer‚Äù */
coverModal.querySelector('#cover-btn').addEventListener('click', ()=>{
  coverModal.style.display='none';
  playerInfoModal.style.display='flex';
});

/* Iniciar jogo ap√≥s preencher dados obrigat√≥rios */
startGameBtn.addEventListener('click', ()=>{
  const n = nameStart.value.trim();
  const a = areaStart.value.trim();
  const e = edvStart.value.trim();
  [nameStart,areaStart,edvStart].forEach(i=>i.style.borderColor='');
  if(!n || !a || !e){
    [nameStart,areaStart,edvStart].forEach(i=>{
      if(!i.value.trim()) i.style.borderColor='red';
    });
    return;
  }
  playerData = { name:n, area:a, edv:e };
  playerInfoModal.style.display='none';
  mainGameWrapper.classList.remove('hidden');
  startGame();
});

/* Fun√ß√µes principais (mant√™m o jogo igual) */
let score=0,totalStart=0,totalEnd=0,totalTimer=null,currentQuestion=0;
const totalTimerEl=document.getElementById('total-timer');
const questionText=document.getElementById('question-text');
const optionsContainer=document.getElementById('options-container');
const questionCounter=document.getElementById('question-counter');
const scoreDisplay=document.getElementById('score-display');
const questionCounterAlt=document.getElementById('question-counter-alt');
const scoreDisplayAlt=document.getElementById('score-display-alt');
const timerBar=document.getElementById('timer-bar');

let allQuestions = [
  { question: "O que deve ser feito quando um problema grave de qualidade √© identificado na linha?", options: ["Esperar o pr√≥ximo turno", "Parar o processo e acionar o l√≠der", "Continuar o processo at√© o l√≠der chegar", "Intervir acionando o bot√£o de emerg√™ncia, interrompendo o processo"], answer: 1 }, 
  { question: "Quem tem a autoridade para reiniciar o processo ap√≥s uma parada?", options: ["Qualquer operador", "O planejador da qualidade", "Apenas o l√≠der da equipe", "O supervisor de log√≠stica"], answer: 2 }, 
  { question: "As instru√ß√µes de trabalho devem ser:", options: ["Guardadas na gaveta", "Claramente exibidas na esta√ß√£o", "Explicadas s√≥ no treinamento inicial", "Orais, sem documento"], answer: 1 }, 
  { question: "Qual documento ajuda a identificar riscos de falhas no processo?", options: ["Checklist de limpeza", "An√°lise de modos e efeitos de falhas (FMEA)", "Instru√ß√£o de Trabalho", "Ordem de Trabalho"], answer: 1 }, 
  { question: "Qual deve ser a condi√ß√£o dos dispositivos de teste usados na produ√ß√£o?", options: ["Qualquer um serve", "Devem ser calibrados e identificados", "S√≥ calibrados se sobrar tempo", "Testados apenas quando quebram"], answer: 1 }, 
  { question: "Para confirmar que sistemas autom√°ticos de inspe√ß√£o funcionam bem, √© necess√°rio:", options: ["Aguardar reclama√ß√µes do cliente", "Verificar estabilidade conforme o padr√£o", "Resetar a m√°quina diariamente", "Usar apenas observa√ß√£o visual"], answer: 1 }, 
  { question: "O que deve ser feito ap√≥s a troca de uma ferramenta?", options: ["Continuar normal", "Guardar no arm√°rio sem checar", "Avaliar a ferramenta quanto a danos", "Jogar fora imediatamente"], answer: 2 }, 
  { question: "Em rela√ß√£o √†s caixas verdes e vermelhas, qual √© a regra?", options: ["Verde √© para pe√ßas ruins, vermelho para boas", "Tanto faz a cor", "Verde e vermelho fazem parte da decora√ß√£o", "Verde √© para pe√ßas boas, vermelho para pe√ßas ruins"], answer: 3 }, 
  { question: "O retrabalho s√≥ √© permitido se:", options: ["For r√°pido e sem supervis√£o", "O operador decidir sozinho", "O supervisor n√£o perceber", "Usar o equipamento original e respeitar limites de tempo/quantidade"], answer: 3 }, 
  { question: "Quem deve seguir os padr√µes de sucateamento e entrega de pe√ßas?", options: ["Apenas l√≠deres", "Todos os membros da equipe", "S√≥ engenheiros", "Apenas log√≠stica"], answer: 1 }, 
  { question: "O que significa FIFO?", options: ["First In, First Out", "Fast In, Fast Out", "Full Inside, Full Outside", "Fim Interno, Fim Operacional"], answer: 0 }, 
  { question: "Por que √© importante seguir FIFO no estoque?", options: ["Para usar primeiro as pe√ßas mais novas", "Para evitar bagun√ßa visual", "Para enfeitar o almoxarifado", "Para garantir que pe√ßas mais antigas sejam usadas primeiro"], answer: 3 }, 
  { question: "As pe√ßas no ponto de uso devem ser:", options: ["Misturadas para facilitar", "Protegidas contra retirada n√£o intencional", "Deixadas em qualquer lugar", "Retiradas sem controle"], answer: 1 }, 
  { question: "Qual √© o risco de n√£o identificar corretamente caixas com pe√ßas?", options: ["Perder espa√ßo", "Confundir boas e ruins, gerando falhas na qualidade", "Atrapalhar a pintura da linha", "Apenas atrasar a log√≠stica"], answer: 1 }, 
  { question: "O que acontece se pe√ßas ruins forem colocadas em caixas verdes?", options: ["N√£o h√° problema", "Risco de enviar pe√ßas defeituosas ao cliente", "Ajuda no fluxo", "Facilita a contagem"], answer: 1 }, 
  { question: "Para evitar falhas repetitivas, usamos qual m√©todo?", options: ["Brainstorming", "8D", "3R", "FIFO"], answer: 1 },
  { question: "Por que a manuten√ß√£o aut√¥noma √© importante?", options: ["Para liberar os engenheiros de toda responsabilidade", "Para que os operadores cuidem da m√°quina no dia a dia", "Para reduzir treinamentos", "Para n√£o gastar com manuten√ß√£o planejada"], answer: 1 },
  { question: "Uma caixa de sucata fora da linha de produ√ß√£o deve estar:", options: ["Aberta para qualquer uso", "Trancada", "Misturada com pe√ßas boas", "Sem identifica√ß√£o"], answer: 1 },
  { question: "Qual √© a consequ√™ncia de n√£o calibrar um dispositivo de teste?", options: ["Nada acontece", "Pode gerar medi√ß√µes incorretas e pe√ßas defeituosas", "Economiza tempo", "Apenas aumenta o peso do equipamento"], answer: 1 },
  { question: "O que √© proibido em rela√ß√£o a sucata:", options: ["Descartar de forma padronizada", "Etiquetar corretamente", "Armazenar em caixas vermelhas", "Usar indevidamente"], answer: 3 },
  { question: "Se uma c√¢mera de inspe√ß√£o come√ßa a falhar, o que deve ser feito?", options: ["Continuar at√© dar problema", "Usar inspe√ß√£o visual improvisada", "Corrigir e verificar estabilidade", "Trocar apenas no pr√≥ximo m√™s"], answer: 2 },
];
  
let questions=[],timer,timeLeft;
const TIME_PER_QUESTION=15;
function nowMs(){return performance.now();}
function formatMs(ms){const m=Math.floor(ms/60000);const s=Math.floor((ms%60000)/1000);const msr=ms%1000;return`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${String(msr).padStart(3,'0')}`;}
function startGame(){
  currentQuestion=0;score=0;
  questions=[...allQuestions].sort(()=>0.5-Math.random());
  totalStart=nowMs();
  totalTimer=setInterval(()=>{totalTimerEl.textContent=formatMs(nowMs()-totalStart)},50);
  loadQuestion();
}
function loadQuestion(){
  if(currentQuestion>=questions.length){endGame();return;}
  const q=questions[currentQuestion];
  questionText.textContent=q.question;
  questionCounter.textContent=`Pergunta ${currentQuestion+1}/${questions.length}`;
  questionCounterAlt.textContent=`Pergunta ${currentQuestion+1}/${questions.length}`;
  optionsContainer.innerHTML='';
  q.options.forEach((txt,i)=>{
    const b=document.createElement('button');
    b.className='option-btn w-full';b.textContent=txt;
    b.onclick=()=>selectAnswer(i,b,q.answer);
    optionsContainer.appendChild(b);
  });
  clearInterval(timer);timeLeft=TIME_PER_QUESTION;
  timerBar.style.width='100%';
  timer=setInterval(()=>{
    timeLeft--;timerBar.style.width=`${(timeLeft/TIME_PER_QUESTION)*100}%`;
    if(timeLeft<=0){clearInterval(timer);currentQuestion++;loadQuestion();}
  },1000);
}
function selectAnswer(i,btn,correct){
  clearInterval(timer);
  const bs=optionsContainer.querySelectorAll('button');
  bs.forEach(b=>b.disabled=true);
  if(i===correct){btn.classList.add('correct');score+=timeLeft*10;}
  else btn.classList.add('incorrect');
  updateScore();
  setTimeout(()=>{currentQuestion++;loadQuestion();},900);
}
function updateScore(){scoreDisplay.textContent=score;scoreDisplayAlt.textContent=`Pontos: ${score}`;}
function endGame(){
  clearInterval(totalTimer);
  totalEnd=nowMs();
  const elapsed=totalEnd-totalStart;
  const msg=`Voc√™ completou a corrida com <b>${score}</b> pontos em <b>${formatMs(elapsed)}</b>!`;
  modalText.innerHTML=msg;
  endGameModal.style.display='flex';
}
restartBtn.addEventListener('click',()=>{
  endGameModal.style.display='none';
  mainGameWrapper.classList.add('hidden');
  coverModal.style.display='flex';
});
</script>
</body>
</html>
